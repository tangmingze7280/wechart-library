<!--<import src="/templates/showcase/index" />
<import src="/templates/page-status-indicator/index" />
<template data="{{pageStatus}}" is="page-status-indicator"></template>-->
<!-- 获取到图书信息 -->
<block wx:if="{{pageStatus == 'loading'}}">
    <!-- 图书信息 -->
    <view class="ui-panel ui-book-card">
        <view class="ui-book-card__info font-gray-26">
            <view class="ui-book-card__info-title font-black-34">{{book.title}}</view>
            <view>评分：<span class="color-yellow">{{book.totalScore}} </span>({{book.reviewNum}}条评论)</view>
            <view>作者:
                <text wx:for='{{author}}' wx:key="*this" class="ui-book-card__info-name">{{item}}</text>
            </view>
            <view wx:if="{{book.translator.trim.length}}">译者:
                <text wx:for="{{book.translator}}" wx:key="*this" class="ui-book-card__info-name">{{item}}</text>
            </view>
            <view>出版社: {{book.publisher}}</view>
            <view>出版时间: {{book.pubdate}}</view>
            <view>分类号: {{book.classNum}}</view>
            <view>索书号: {{book.callNumber}}</view>
            <view>页数: {{book.page}}页</view>
            <view>字数: 约{{book.word}}字</view>
            <view>ISBN: {{book.isbn}}</view>
        </view>
        <image class="ui-book-card__img" src="{{JSON.parse(book.imgs.small)}}" mode="widthFix"
               bindtap="onPreview"></image>
    </view>
    <!-- 馆藏信息 -->
    <view class="ui-label">馆藏信息</view>
    <view class="ui-panel" hover-class="ui--active" bindtap="onShowPopup">
        <view class="weui-cell">
            <view class="weui-cell__bd font-black-26">共有<span class="color-green"> {{book.availableNum}} </span>本可借
            </view>
            <view class="weui-cell__ft_in-access"></view>
        </view>
    </view>
    <!-- 图书详情 -->
    <view class="ui-label">内容简介</view>
    <view class="ui-card font-black-26 pre-wrap">{{book.description || "暂无内容简介"}}</view>
    <view class="ui-label">作者简介</view>
    <view class="ui-card font-black-26 pre-wrap">{{book.authorIntroduction.split || "暂无作者简介"}}</view>
    <view class="ui-label">译者简介</view>
    <view class="ui-card font-black-26 pre-wrap">{{book.translatorIntroduction || "暂无译者简介"}}</view>
    <view class="ui-label">目录</view>
    <view class="ui-card font-black-26 pre-wrap">{{book.catalog || "暂无目录"}}</view>
    <view class="ui-label">试读</view>
    <view class="ui-card font-black-26 pre-wrap">{{book.preview || "暂无试读"}}</view>
    <!-- 相关图书 -->
    <view class="ui-label">相关图书</view>
    <view wx:if="{{book.relevant_books && book.relevant_books.length}}" class="ui-panel">
        <template is="showcase-book" data="{{books: book.relevant_books}}"></template>
    </view>
    <view wx:else class="font-black-26 ui-card">暂无</view>
    <!-- 包含这本书的书单 -->
    <view class="ui-label">包含这本书的书单</view>
    <view wx:if="{{book.relevantbookImg_booklists && book.relevant_booklists.length}}" class="ui-panel">
        <template is="showcase-booklist" data="{{booklists: book.relevant_booklists}}"></template>
    </view>
    <view wx:else class="font-black-26 ui-card">暂无</view>
    <!-- 底部菜单 -->
    <view class="menubar">
        <view class="menubar__icon" data-target="add" catchtap="updataCollection">
            <image class="menubar__icon-img" src="/static/imgs/icon_me_fill.png" mode="aspectFit"></image>
            <span class="menubar__icon-text">加入收藏</span>
        </view>
        <view class="menubar__icon" data-target="review" catchtap="onNavigate">
            <image class="menubar__icon-img" src="/static/imgs/icon_me_fill.png" mode="widthFix"></image>
            <span class="menubar__icon-text">查看书评</span>
        </view>
        <button class="menubar__btn" type="primary" bindtap="onShowPopup">借阅此书</button>
    </view>
</block>
